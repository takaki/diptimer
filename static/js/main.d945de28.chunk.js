(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5436:function(e,t,n){e.exports=n(5574)},5445:function(e,t,n){},5452:function(e,t){},5454:function(e,t){},5573:function(e,t,n){},5574:function(e,t,n){"use strict";n.r(t);var i=n(1),a=n.n(i),r=n(22),s=n(16),o=n(18),u=n(20),c=n(19),l=n(21),h=n(25),m=n(57),d=n(55),f=(n(5445),"UPDATE_MODEL");var p,S=n(17),b=n(137),v=n.n(b),y=n(28),g=n.n(y),E=function(){function e(t){Object(s.a)(this,e),this.milliSeconds=t}return Object(o.a)(e,[{key:"format",value:function(){if(this.milliSeconds<=0)return"00:00:00";var e=this.milliSeconds/1e3;return g()("%02d:%02d:%02d",Math.floor(e/3600),Math.floor(e%3600/60),Math.floor(e%60))}},{key:"toLeftString",value:function(){var e=Math.ceil(this.milliSeconds/1e3);if(e<10)return e.toString();var t=Math.floor(e/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return"\u6b8b\u308a".concat(t>0?t+"\u6642\u9593":"","\n        ").concat(n>0?n+"\u5206":"","\n        ").concat(i>0?i+"\u79d2":"","\n        \u3067\u3059")}},{key:"calc",value:function(t){return new e(this.milliSeconds-t)}},{key:"seconds",get:function(){return this.milliSeconds/1e3}},{key:"finished",get:function(){return this.milliSeconds<0}}]),e}();!function(e){e[e.BEFORE_START=0]="BEFORE_START",e[e.RUNNING=1]="RUNNING",e[e.SUSPEND=2]="SUSPEND",e[e.FINISHED=3]="FINISHED"}(p||(p={}));var O=function(){function e(t,n,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){};Object(s.a)(this,e),this.title=t,this.checkPoints=i,this.onTick=a,this.onFinish=r,this.remainTime1=void 0,this.timeoutIds=[],this.state=p.BEFORE_START,this.startedAt=void 0,this.remainTime1=new E(1e3*n)}return Object(o.a)(e,[{key:"go",value:function(){var e=this;if(this.state!==p.RUNNING&&this.state!==p.FINISHED){if(this.state===p.BEFORE_START){var t=new SpeechSynthesisUtterance("".concat(this.title,"\u3067\u3059"));t.lang="ja-JP",speechSynthesis.speak(t)}this.startedAt=new Date,this.timeoutIds.push(window.setTimeout(function(){return e.tick_()},100)),this.state=p.RUNNING}}},{key:"pause",value:function(){this.state!==p.SUSPEND&&this.state!==p.FINISHED&&(this.remainTime1=this.remainTime(),this.startedAt=void 0,this.timeoutIds.forEach(function(e){return clearTimeout(e)}),this.state=p.SUSPEND)}},{key:"remainTime",value:function(){return this.remainTime1.calc(this.startedAt?Date.now()-this.startedAt.getTime():0)}},{key:"remainTimeString",value:function(){return this.remainTime().format()}},{key:"tick_",value:function(){var e=this;this.timeoutIds.push(window.setTimeout(function(){e.onTick(e),e.remainTime().finished?(e.state=p.FINISHED,e.onFinish(e)):e.tick_()},90))}},{key:"canRun",value:function(){return this.state===p.BEFORE_START||this.state===p.SUSPEND}}]),e}(),k=n(15),j={name:"",timers:Object(k.a)()},w=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(Object(k.c)(j)),T=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),t}(Object(k.c)({title:"",duration:0})),I={menuEntries:k.a.of(new w({name:"\u30c7\u30a3\u30d7\u30ed\u30de\u30b7\u30fc",timers:k.a.of(new T({title:"\u5916\u4ea4\u30d5\u30a7\u30a4\u30ba",duration:900}),new T({title:"\u547d\u4ee4\u8a18\u8ff0\u30d5\u30a7\u30a4\u30ba",duration:300}),new T({title:"\u547d\u4ee4\u89e3\u6c7a\u30d5\u30a7\u30a4\u30ba",duration:600}))}),new w({name:"\u30c6\u30b9\u30c8",timers:k.a.of(new T({title:"A",duration:5}),new T({title:"B",duration:4}),new T({title:"C",duration:3}))}),new w({name:"\u30c6\u30b9\u30c82",timers:k.a.of(new T({title:"A",duration:1}))})).concat(Object(k.b)(1,16).map(function(e){return new w({name:g()("%d\u5206",e),timers:k.a.of(new T({title:g()("%d\u5206",e),duration:60*e}))})}))},N=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"selectMenu",value:function(e,t){var n=this.menuEntries.map(function(e){return e.name}).map(function(e,t){return a.a.createElement(S.h,{value:t,key:e},e)});return a.a.createElement(S.i,{value:e,onChange:t},n)}}]),t}(Object(k.c)(I)),M=function(e){function t(){var e,n;Object(s.a)(this,t);for(var i=arguments.length,a=new Array(i),r=0;r<i;r++)a[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(a)))).noSleep=new v.a,n.timerMenu=new N,n.sw=new O("dummy",0,[]),n.onPlayClick=function(){n.noSleep.enable(),n.sw.canRun()?(n.sw.go(),n.props.updateStore(n.props.dataStore.merge({label:"Pause",running:!0}))):(n.sw.pause(),n.props.updateStore(n.props.dataStore.merge({label:"Go",running:!1})))},n.onResetClick=function(){n.onChange(n.props.dataStore.menuIndex)},n.onMenuSelect=function(e){n.onChange(parseInt(e.target.value,10))},n}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.onChange(this.props.dataStore.menuIndex)}},{key:"render",value:function(){return a.a.createElement("div",null,this.timerMenu.selectMenu(this.props.dataStore.menuIndex,this.onMenuSelect),a.a.createElement(S.d,null,this.props.dataStore.timerList(this.timerMenu),a.a.createElement(S.b,null),this.props.dataStore.timeDisplay(),this.props.dataStore.controlButtons(this.onPlayClick,this.onResetClick)))}},{key:"onChange",value:function(e){var t=this,n=function(e){if(e.remainTime().seconds<e.checkPoints[0]){var n=new SpeechSynthesisUtterance(e.remainTime().toLeftString());n.lang="ja-JP",n.rate=1.2,speechSynthesis.speak(n),e.checkPoints.shift()}t.props.updateStore(t.props.dataStore.set("time",e.remainTimeString()))};this.sw.pause(),this.noSleep.disable();var i=this.props.dataStore.merge({menuIndex:e,timerIndex:0,finish:!1,label:"Go",running:!1});this.sw=i.createStopWatch(this.timerMenu,n,function e(i){if(t.props.dataStore.isTimerLeft(t.timerMenu)){var a=t.props.dataStore.nextTimer();t.sw=a.createStopWatch(t.timerMenu,n,e),t.props.updateStore(a),t.sw.go()}else{var r=new SpeechSynthesisUtterance("\u7d42\u4e86\u3067\u3059\u3002");r.lang="ja-JP",speechSynthesis.speak(r),t.props.updateStore(t.props.dataStore.set("finish",!0))}}),this.props.updateStore(i.set("time",this.sw.remainTimeString()))}}]),t}(i.Component);var D=Object(m.b)(function(e){return{dataStore:e}},function(e){return{updateStore:function(t){return e(function(e){return{type:f,dataStore:e}}(t))}}})(M),x=n(40),R=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"getTimer",value:function(e){return e.menuEntries.get(this.menuIndex).timers.get(this.timerIndex)}},{key:"getTitle",value:function(e){return this.getTimer(e).get("title")}},{key:"getDuration",value:function(e){return this.getTimer(e).get("duration")}},{key:"getCheckPoints",value:function(e){var t=this;return Object(k.b)(1,6).concat(Object(k.b)(10,60,10)).concat(Object(k.b)(60,900,60)).filter(function(n){return n<t.getDuration(e)}).reverse().toArray()}},{key:"isTimerLeft",value:function(e){return this.timerIndex+1<e.menuEntries.get(this.menuIndex).timers.size}},{key:"nextTimer",value:function(){return this.set("timerIndex",this.timerIndex+1)}},{key:"timerList",value:function(e){var t=this;return e.menuEntries.get(this.menuIndex).timers.map(function(e,n){return a.a.createElement(S.e,{button:!0,disabled:!0,className:"timer-list","data-is-current":n===t.timerIndex,key:n},a.a.createElement(S.g,null,g()("%s %d:%02d",e.title,Math.floor(e.duration/60),e.duration%60)),a.a.createElement(S.f,null,a.a.createElement(S.c,{"aria-label":"Delete"},n===t.timerIndex?a.a.createElement(x.c,null):a.a.createElement(x.d,null))))})}},{key:"timeDisplay",value:function(){return a.a.createElement("div",{className:"time-display","data-is-finish":this.finish},a.a.createElement("code",null,this.time))}},{key:"controlButtons",value:function(e,t){var n=this.finish?"":a.a.createElement(S.a,{variant:"contained",className:"button",onClick:e},this.running?a.a.createElement(x.a,null):a.a.createElement(x.b,null),this.label);return a.a.createElement("div",{className:"control-buttons"},n,a.a.createElement(S.a,{variant:"contained",className:"button",color:"secondary",onClick:t},"Reset"))}},{key:"createStopWatch",value:function(e,t,n){return new O(this.getTitle(e),this.getDuration(e),this.getCheckPoints(e),t,n)}}]),t}(Object(k.c)({menuIndex:0,timerIndex:0,time:"",label:"Go",running:!1,finish:!1}));var P=Object(d.b)(function(e,t){switch(t.type){case f:return t.dataStore;default:return e}},new R),C=Object(h.createMuiTheme)({typography:{useNextVariants:!0}}),A=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return a.a.createElement(h.MuiThemeProvider,{theme:C},a.a.createElement(m.a,{store:P},a.a.createElement(D,null)))}}]),t}(i.Component);n(5573);r.render(i.createElement(A,null),document.getElementById("root"))}},[[5436,1,2]]]);
//# sourceMappingURL=main.d945de28.chunk.js.map